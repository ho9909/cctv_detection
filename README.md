# CCTV ê¸°ë°˜ ì‹¤ì‹œê°„ ì°¨ëŸ‰ ì¶”ì  ì‹œìŠ¤í…œ (Real-time Vehicle Tracking System based on Public CCTV)

# ğŸ“ í”„ë¡œì íŠ¸ ê°œìš” (Overview)
> ë³¸ í”„ë¡œì íŠ¸ëŠ” **ëŒ€í•œë¯¼êµ­ ê³µê³µë°ì´í„°í¬í„¸(ITS êµ­ê°€êµí†µì •ë³´ì„¼í„°)**ì—ì„œ ì œê³µí•˜ëŠ” ì‹¤ì‹œê°„ CCTV ì˜ìƒ ìŠ¤íŠ¸ë¦¼ì„ í™œìš©í•˜ì—¬, ì‚¬ì „ í•™ìŠµëœ YOLOv5 ëª¨ë¸ë¡œ ì°¨ëŸ‰ì„ íƒì§€í•˜ê³  ì¶”ì í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
> ì‚¬ìš©ìëŠ” ì§€ë„ìƒì˜ CCTVë¥¼ ì„ íƒí•˜ì—¬ ì‹¤ì‹œê°„ ì˜ìƒì„ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©°, ì˜ìƒ ì† ì°¨ëŸ‰ì„ í´ë¦­í•˜ì—¬ ì¶”ì ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ì¶”ì í•˜ë˜ ì°¨ëŸ‰ì´ í˜„ì¬ CCTV í™”ë©´ì—ì„œ ë²—ì–´ë‚˜ë©´, ì‹œìŠ¤í…œì€ ìë™ìœ¼ë¡œ ê°€ì¥ ê°€ê¹Œìš´ ì¸ì ‘ CCTV(ë°˜ê²½ 1km ë‚´)ë¥¼ íƒìƒ‰í•˜ê³  í™”ë©´ì„ ì „í™˜í•˜ì—¬ ëŠê¹€ ì—†ëŠ” ì¶”ì  ê²½í—˜ì„ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆ> ë‹¤.

# âœ¨ ì£¼ìš” ê¸°ëŠ¥ (Features)
> ì‹¤ì‹œê°„ CCTV ìŠ¤íŠ¸ë¦¬ë°: ê³µê³µë°ì´í„° APIë¥¼ í†µí•´ ì „êµ­ ê³ ì†ë„ë¡œ ë° êµ­ë„ì˜ CCTV ì˜ìƒì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
> AI ê¸°ë°˜ ê°ì²´ íƒì§€: YOLOv5 ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ì˜ìƒ ë‚´ì˜ ì°¨ëŸ‰(ìë™ì°¨, ë²„ìŠ¤, íŠ¸ëŸ­, ì˜¤í† ë°”ì´ ë“±)ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ íƒì§€í•˜ê³  ë°”ìš´ë”© ë°•ìŠ¤ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.
> 
> í´ë¦­ ê¸°ë°˜ ìƒí˜¸ì‘ìš© ì¶”ì : ì‚¬ìš©ìê°€ ë§ˆìš°ìŠ¤ë¡œ íŠ¹ì • ì°¨ëŸ‰ì„ í´ë¦­í•˜ë©´, í•´ë‹¹ ì°¨ëŸ‰ì— ëŒ€í•œ ì¶”ì (Tracking)ì„ ì‹œì‘í•©ë‹ˆë‹¤.
> 
> ìë™ CCTV ì „í™˜: ì¶”ì  ì¤‘ì¸ ì°¨ëŸ‰ì´ í™”ë©´ì„ ë²—ì–´ë‚˜ë©´, í˜„ì¬ CCTV ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê°€ì¥ ê°€ê¹Œìš´ ë‹¤ìŒ CCTVë¥¼ ìë™ìœ¼ë¡œ ì°¾ì•„ ìŠ¤íŠ¸ë¦¼ì„ ì „í™˜í•©ë‹ˆë‹¤.
> 
> ì»¤ë§¨ë“œ ë¼ì¸ ê¸°ë°˜ ìœ ì—°í•œ ì‹¤í–‰: API í‚¤, ëª¨ë¸ ê°€ì¤‘ì¹˜, ì‹ ë¢°ë„ ì„ê³„ê°’ ë“± ì£¼ìš” ì„¤ì •ì„ í„°ë¯¸ë„ ì¸ìë¡œ ìœ ì—°í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> 
> ì•ˆì •ì ì¸ ìš´ì˜ì„ ìœ„í•œ ì„¤ê³„:
> 
> ìì› ëª¨ë‹ˆí„°ë§: psutilì„ í†µí•´ CPU/ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì£¼ê¸°ì ìœ¼ë¡œ ë¡œê¹…í•˜ì—¬ ì¥ì‹œê°„ ìš´ì˜ ì‹œ ì•ˆì •ì„±ì„ í™•ë³´í•©ë‹ˆë‹¤.
> 
> ì•ˆì „í•œ ì¢…ë£Œ: Ctrl+C ì‹ í˜¸ë¥¼ ê°ì§€í•˜ì—¬ ì‚¬ìš© ì¤‘ì¸ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ì•ˆì „í•˜ê²Œ ì •ë¦¬í•˜ê³  ì¢…ë£Œí•©ë‹ˆë‹¤.
> 
> ìƒì„¸ ë¡œê¹…: íŒŒì¼ ê¸°ë°˜(tracker_session.log) ë¡œê¹… ë° íšŒì „(Rotating) ê¸°ëŠ¥ì„ í†µí•´ ëª¨ë“  ë™ì‘ ê¸°ë¡ì„ ìƒì„¸íˆ ë‚¨ê²¨ ë””ë²„ê¹… ë° ì„±ëŠ¥ ë¶„ì„ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤.
> 
> ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: í•µì‹¬ ë¡œì§(ê±°ë¦¬ ê³„ì‚°, ì¸ì ìœ íš¨ì„± ê²€ì‚¬ ë“±)ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í¬í•¨í•˜ì—¬ ì½”ë“œì˜ ì‹ ë¢°ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.
> 
<br />

# ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)
> ì–¸ì–´: Python 3.9+
> 
> AI/ML: PyTorch, YOLOv5
> 
> ì»´í“¨í„° ë¹„ì „: OpenCV-Python
> 
> ë°ì´í„° ì²˜ë¦¬: requests, psutil
> 
> ê¸°íƒ€: argparse, unittest
<br />
# âš™ï¸ ì„¤ì¹˜ ë° ì„¤ì • (Installation & Setup)
> ë³¸ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì•„ë˜ì˜ ë‹¨ê³„ë¥¼ ë”°ë¼ì£¼ì„¸ìš”.
>
<br />

>> ## 1. í”„ë¡œì íŠ¸ í´ë¡ 
>>> git clone https://github.com/ho9909/cctv_detection.git
<br />
>>> cd cctv_detection
>>>
<br />

>> ## 2. YOLOv5 ì„œë¸Œëª¨ë“ˆ í´ë¡  ë° ì„¤ì •
> 
>>> í”„ë¡œì íŠ¸ê°€ YOLOv5ì˜ ë‚´ë¶€ í•¨ìˆ˜ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ë¯€ë¡œ, YOLOv5 ë ˆí¬ì§€í† ë¦¬ë¥¼ ì„œë¸Œëª¨ë“ˆë¡œ í´ë¡ í•˜ê³  ì„¤ì •í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
>>> // YOLOv5 ì„œë¸Œëª¨ë“ˆ ì´ˆê¸°í™” ë° í´ë¡ 
>>> git submodule update --init --recursive
<br />

>> ## 3. í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
>>> requirements.txt íŒŒì¼ì„ í†µí•´ í•„ìš”í•œ ëª¨ë“  íŒŒì´ì¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
>>> pip install -r requirements.txt
>>> ì°¸ê³ : requirements.txtì—ëŠ” psutil ë“± í•„ìš”í•œ ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í¬í•¨ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
<br />

>> ## 4. ê³µê³µë°ì´í„° API í‚¤ ë°œê¸‰
>>>
>>> ITS êµ­ê°€êµí†µì •ë³´ì„¼í„° ì˜¤í”ˆ API ì‚¬ì´íŠ¸ì— ì ‘ì†í•˜ì—¬ íšŒì›ê°€ì… ë° ë¡œê·¸ì¸í•©ë‹ˆë‹¤.
>>>
>>>[ì‹¤ì‹œê°„ ëŒë°œìƒí™© CCTV] APIë¥¼ ì°¾ì•„ í™œìš©ì‹ ì²­ì„ í•˜ê³ , ë°œê¸‰ë°›ì€ **ì„œë¹„ìŠ¤ í‚¤(API Key)**ë¥¼ ë³µì‚¬í•´ë‘¡ë‹ˆë‹¤.
<br />
# 5. â–¶ï¸ ì‹¤í–‰ ë°©ë²• (How to Run)
>
>í„°ë¯¸ë„ì—ì„œ track_vehicles.py ìŠ¤í¬ë¦½íŠ¸ë¥¼ argparse ì¸ìì™€ í•¨ê»˜ ì‹¤í–‰í•©ë‹ˆë‹¤.
>
>> ## 1.ê°€ì¥ ê¸°ë³¸ì ì¸ ì‹¤í–‰ (ìë™ ê°€ì¤‘ì¹˜ íƒìƒ‰)
>>> --api-keyëŠ” í•„ìˆ˜ ì¸ìì…ë‹ˆë‹¤. ë°œê¸‰ë°›ì€ ë³¸ì¸ì˜ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
>>> python track_vehicles.py --api-key "YOUR_API_KEY_HERE"

>> ## 2.ì»¤ìŠ¤í…€ ëª¨ë¸ ë° ë‹¤ë¥¸ ì„¤ì •ìœ¼ë¡œ ì‹¤í–‰
>>> í•™ìŠµì‹œí‚¨ ì»¤ìŠ¤í…€ ê°€ì¤‘ì¹˜ íŒŒì¼(best.pt)ì„ ì‚¬ìš©í•˜ê³ , ì‹ ë¢°ë„ ë° íƒì§€ ê°„ê²© ë“±ì„ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>>>
>>> python track_vehicles.py --api-key "YOUR_API_KEY_HERE" --weights "path/to/your/best.pt" --conf-thres 0.5 --interval 3
</br>

### ì‹¤í–‰ ì¸ì (Command-line Arguments)

| ì¸ì | ì„¤ëª… | ê¸°ë³¸ê°’ |
| :--- | :--- | :--- |
| `--api-key` | **(í•„ìˆ˜)** ITS ì˜¤í”ˆ API ì„œë¹„ìŠ¤ í‚¤ | - |
| `--weights` | ì‚¬ìš©í•  `.pt` ê°€ì¤‘ì¹˜ íŒŒì¼ ê²½ë¡œ. ë¯¸ì§€ì • ì‹œ `runs/train/`ì˜ ìµœì‹  ëª¨ë¸ ìë™ íƒìƒ‰ | `None` |
| `--conf-thres` | ê°ì²´ íƒì§€ ì‹ ë¢°ë„ ì„ê³„ê°’ (0.0 ~ 1.0) | `0.4` |
| `--iou-thres` | NMS(Non-Maximum Suppression) IoU ì„ê³„ê°’ (0.0 ~ 1.0) | `0.5` |
| `--interval` | ì°¨ëŸ‰ì„ íƒì§€í•  í”„ë ˆì„ ê°„ê²© | `5` |
| `--radius` | ë‹¤ìŒ CCTVë¥¼ íƒìƒ‰í•  ë°˜ê²½ (km) | `1.0` |
| `--classes` | íƒì§€í•  í´ë˜ìŠ¤ì˜ ID ëª©ë¡ (ê³µë°±ìœ¼ë¡œ êµ¬ë¶„) | `2 3 5 7` |
| `--max-pages` | APIë¡œë¶€í„° ê°€ì ¸ì˜¬ ìµœëŒ€ í˜ì´ì§€ ìˆ˜ | `10` |
| `--test` | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  ì¢…ë£Œ | `False` |

> # 6. Sheetsë¡œ ë‚´ë³´ë‚´ê¸°
>> âœ… ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Tests)
>>ì½”ë“œì˜ í•µì‹¬ ë¡œì§ì´ ì˜¬ë°”ë¥´ê²Œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>>
>> python track_vehicles.py --test
</br>
